syntax = "proto3";

package omeapi.worker.v1beta1;

option go_package = "github.com/openmarketplaceengine/openmarketplaceengine/internal/omeapi/worker/v1beta1";

service WorkerService {
  rpc GetWorker(GetWorkerRequest) returns (GetWorkerResponse) {}
  rpc SetState(SetStateRequest) returns (SetStateResponse) {}
  rpc QueryByState(QueryByStateRequest) returns (QueryByStateResponse) {}
}

enum WorkerState {
  WORKER_STATE_UNSPECIFIED = 0;
  WORKER_STATE_ONLINE = 1;
  WORKER_STATE_OFFLINE = 2;
  WORKER_STATE_ON_JOB = 3;
}

message GetWorkerRequest {
  string worker_id = 1;
}

message GetWorkerResponse {
  Worker worker = 1;
}

message SetStateRequest {
  string worker_id = 1;
  WorkerState state = 2;
}

message SetStateResponse {
  Worker worker = 1;
}

message QueryByStateRequest {
  WorkerState state = 1;
}

message Worker {
  string worker_id = 1;
  WorkerState state = 2;
}

message QueryByStateResponse {
  repeated Worker workers = 1;
}

